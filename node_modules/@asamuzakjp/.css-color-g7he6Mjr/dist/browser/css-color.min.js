var dl=Object.defineProperty,oo=e=>{throw TypeError(e)},ml=(e,t,n)=>t in e?dl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t,n)=>ml(e,typeof t!="symbol"?t+"":t,n),Va=(e,t,n)=>t.has(e)||oo("Cannot "+n),h=(e,t,n)=>(Va(e,t,"read from private field"),n?n.call(e):t.get(e)),U=(e,t,n)=>t.has(e)?oo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),F=(e,t,n,r)=>(Va(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_=(e,t,n)=>(Va(e,t,"access private method"),n),Xa=(e,t,n,r)=>({set _(a){F(e,t,a,n)},get _(){return h(e,t,r)}});class yr extends Error{constructor(t,n,r,a){super(t),X(this,"sourceStart"),X(this,"sourceEnd"),X(this,"parserState"),this.name="ParseError",this.sourceStart=n,this.sourceEnd=r,this.parserState=a}}class un extends yr{constructor(t,n,r,a,s){super(t,n,r,a),X(this,"token"),this.token=s}}const Kt={UnexpectedNewLineInString:"Unexpected newline while consuming a string token.",UnexpectedEOFInString:"Unexpected EOF while consuming a string token.",UnexpectedEOFInComment:"Unexpected EOF while consuming a comment.",UnexpectedEOFInURL:"Unexpected EOF while consuming a url token.",UnexpectedEOFInEscapedCodePoint:"Unexpected EOF while consuming an escaped code point.",UnexpectedCharacterInURL:"Unexpected character while consuming a url token.",InvalidEscapeSequenceInURL:"Invalid escape sequence while consuming a url token.",InvalidEscapeSequenceAfterBackslash:'Invalid escape sequence after "\\"'};function Yt(...e){let t="";for(let n=0;n<e.length;n++)t+=e[n][1];return t}const _n=13,Me=45,In=10,Tn=43,hn=65533;function gl(e){return e.source.codePointAt(e.cursor)===60&&e.source.codePointAt(e.cursor+1)===33&&e.source.codePointAt(e.cursor+2)===Me&&e.source.codePointAt(e.cursor+3)===Me}function ct(e){return e>=48&&e<=57}function vl(e){return e>=65&&e<=90}function bl(e){return e>=97&&e<=122}function Hn(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function wl(e){return bl(e)||vl(e)}function Un(e){return wl(e)||$l(e)||e===95}function Ka(e){return Un(e)||ct(e)||e===Me}function $l(e){return e===183||e===8204||e===8205||e===8255||e===8256||e===8204||192<=e&&e<=214||216<=e&&e<=246||248<=e&&e<=893||895<=e&&e<=8191||8304<=e&&e<=8591||11264<=e&&e<=12271||12289<=e&&e<=55295||63744<=e&&e<=64975||65008<=e&&e<=65533||e===0||!!zn(e)||e>=65536}function na(e){return e===In||e===_n||e===12}function xn(e){return e===32||e===In||e===9||e===_n||e===12}function zn(e){return e>=55296&&e<=57343}function Gn(e){return e.source.codePointAt(e.cursor)===92&&!na(e.source.codePointAt(e.cursor+1)??-1)}function ra(e,t){return t.source.codePointAt(t.cursor)===Me?t.source.codePointAt(t.cursor+1)===Me||!!Un(t.source.codePointAt(t.cursor+1)??-1)||t.source.codePointAt(t.cursor+1)===92&&!na(t.source.codePointAt(t.cursor+2)??-1):!!Un(t.source.codePointAt(t.cursor)??-1)||Gn(t)}function io(e){return e.source.codePointAt(e.cursor)===Tn||e.source.codePointAt(e.cursor)===Me?!!ct(e.source.codePointAt(e.cursor+1)??-1)||e.source.codePointAt(e.cursor+1)===46&&ct(e.source.codePointAt(e.cursor+2)??-1):e.source.codePointAt(e.cursor)===46?ct(e.source.codePointAt(e.cursor+1)??-1):ct(e.source.codePointAt(e.cursor)??-1)}function yl(e){return e.source.codePointAt(e.cursor)===47&&e.source.codePointAt(e.cursor+1)===42}function Nl(e){return e.source.codePointAt(e.cursor)===Me&&e.source.codePointAt(e.cursor+1)===Me&&e.source.codePointAt(e.cursor+2)===62}var v,S,aa;function El(e){switch(e){case v.OpenParen:return v.CloseParen;case v.CloseParen:return v.OpenParen;case v.OpenCurly:return v.CloseCurly;case v.CloseCurly:return v.OpenCurly;case v.OpenSquare:return v.CloseSquare;case v.CloseSquare:return v.OpenSquare;default:return null}}function Cl(e){switch(e[0]){case v.OpenParen:return[v.CloseParen,")",-1,-1,void 0];case v.CloseParen:return[v.OpenParen,"(",-1,-1,void 0];case v.OpenCurly:return[v.CloseCurly,"}",-1,-1,void 0];case v.CloseCurly:return[v.OpenCurly,"{",-1,-1,void 0];case v.OpenSquare:return[v.CloseSquare,"]",-1,-1,void 0];case v.CloseSquare:return[v.OpenSquare,"[",-1,-1,void 0];default:return null}}function xl(e,t){for(t.advanceCodePoint(2);;){const n=t.readCodePoint();if(n===void 0){const r=[v.Comment,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new un(Kt.UnexpectedEOFInComment,t.representationStart,t.representationEnd,["4.3.2. Consume comments","Unexpected EOF"],r)),r}if(n===42&&t.source.codePointAt(t.cursor)!==void 0&&t.source.codePointAt(t.cursor)===47){t.advanceCodePoint();break}}return[v.Comment,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0]}function sa(e,t){const n=t.readCodePoint();if(n===void 0)return e.onParseError(new yr(Kt.UnexpectedEOFInEscapedCodePoint,t.representationStart,t.representationEnd,["4.3.7. Consume an escaped code point","Unexpected EOF"])),hn;if(Hn(n)){const r=[n];let a;for(;(a=t.source.codePointAt(t.cursor))!==void 0&&Hn(a)&&r.length<6;)r.push(a),t.advanceCodePoint();xn(t.source.codePointAt(t.cursor)??-1)&&(t.source.codePointAt(t.cursor)===_n&&t.source.codePointAt(t.cursor+1)===In&&t.advanceCodePoint(),t.advanceCodePoint());const s=parseInt(String.fromCodePoint(...r),16);return s===0||zn(s)||s>1114111?hn:s}return n===0||zn(n)?hn:n}function oa(e,t){const n=[];for(;;){const r=t.source.codePointAt(t.cursor)??-1;if(r===0||zn(r))n.push(hn),t.advanceCodePoint(+(r>65535)+1);else if(Ka(r))n.push(r),t.advanceCodePoint(+(r>65535)+1);else{if(!Gn(t))return n;t.advanceCodePoint(),n.push(sa(e,t))}}}function Fl(e,t){t.advanceCodePoint();const n=t.source.codePointAt(t.cursor);if(n!==void 0&&(Ka(n)||Gn(t))){let r=aa.Unrestricted;ra(0,t)&&(r=aa.ID);const a=oa(e,t);return[v.Hash,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...a),type:r}]}return[v.Delim,"#",t.representationStart,t.representationEnd,{value:"#"}]}function kl(e,t){let n=S.Integer;for(t.source.codePointAt(t.cursor)!==Tn&&t.source.codePointAt(t.cursor)!==Me||t.advanceCodePoint();ct(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();if(t.source.codePointAt(t.cursor)===46&&ct(t.source.codePointAt(t.cursor+1)??-1))for(t.advanceCodePoint(2),n=S.Number;ct(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();if(t.source.codePointAt(t.cursor)===101||t.source.codePointAt(t.cursor)===69){if(ct(t.source.codePointAt(t.cursor+1)??-1))t.advanceCodePoint(2);else{if(t.source.codePointAt(t.cursor+1)!==Me&&t.source.codePointAt(t.cursor+1)!==Tn||!ct(t.source.codePointAt(t.cursor+2)??-1))return n;t.advanceCodePoint(3)}for(n=S.Number;ct(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint()}return n}function Ya(e,t){let n;{const s=t.source.codePointAt(t.cursor);s===Me?n="-":s===Tn&&(n="+")}const r=kl(0,t),a=parseFloat(t.source.slice(t.representationStart,t.representationEnd+1));if(ra(0,t)){const s=oa(e,t);return[v.Dimension,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a,signCharacter:n,type:r,unit:String.fromCodePoint(...s)}]}return t.source.codePointAt(t.cursor)===37?(t.advanceCodePoint(),[v.Percentage,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a,signCharacter:n}]):[v.Number,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a,signCharacter:n,type:r}]}function Sl(e){for(;xn(e.source.codePointAt(e.cursor)??-1);)e.advanceCodePoint();return[v.Whitespace,e.source.slice(e.representationStart,e.representationEnd+1),e.representationStart,e.representationEnd,void 0]}(function(e){e.Comment="comment",e.AtKeyword="at-keyword-token",e.BadString="bad-string-token",e.BadURL="bad-url-token",e.CDC="CDC-token",e.CDO="CDO-token",e.Colon="colon-token",e.Comma="comma-token",e.Delim="delim-token",e.Dimension="dimension-token",e.EOF="EOF-token",e.Function="function-token",e.Hash="hash-token",e.Ident="ident-token",e.Number="number-token",e.Percentage="percentage-token",e.Semicolon="semicolon-token",e.String="string-token",e.URL="url-token",e.Whitespace="whitespace-token",e.OpenParen="(-token",e.CloseParen=")-token",e.OpenSquare="[-token",e.CloseSquare="]-token",e.OpenCurly="{-token",e.CloseCurly="}-token",e.UnicodeRange="unicode-range-token"})(v||(v={})),(function(e){e.Integer="integer",e.Number="number"})(S||(S={})),(function(e){e.Unrestricted="unrestricted",e.ID="id"})(aa||(aa={}));class Ml{constructor(t){X(this,"cursor",0),X(this,"source",""),X(this,"representationStart",0),X(this,"representationEnd",-1),this.source=t}advanceCodePoint(t=1){this.cursor=this.cursor+t,this.representationEnd=this.cursor-1}readCodePoint(){const t=this.source.codePointAt(this.cursor);if(t!==void 0)return this.cursor=this.cursor+1,this.representationEnd=this.cursor-1,t}unreadCodePoint(t=1){this.cursor=this.cursor-t,this.representationEnd=this.cursor-1}resetRepresentation(){this.representationStart=this.cursor,this.representationEnd=-1}}function Al(e,t){let n="";const r=t.readCodePoint();for(;;){const a=t.readCodePoint();if(a===void 0){const s=[v.String,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}];return e.onParseError(new un(Kt.UnexpectedEOFInString,t.representationStart,t.representationEnd,["4.3.5. Consume a string token","Unexpected EOF"],s)),s}if(na(a)){t.unreadCodePoint();const s=[v.BadString,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new un(Kt.UnexpectedNewLineInString,t.representationStart,t.source.codePointAt(t.cursor)===_n&&t.source.codePointAt(t.cursor+1)===In?t.representationEnd+2:t.representationEnd+1,["4.3.5. Consume a string token","Unexpected newline"],s)),s}if(a===r)return[v.String,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}];if(a!==92)a===0||zn(a)?n+=String.fromCodePoint(hn):n+=String.fromCodePoint(a);else{if(t.source.codePointAt(t.cursor)===void 0)continue;if(na(t.source.codePointAt(t.cursor)??-1)){t.source.codePointAt(t.cursor)===_n&&t.source.codePointAt(t.cursor+1)===In&&t.advanceCodePoint(),t.advanceCodePoint();continue}n+=String.fromCodePoint(sa(e,t))}}}function Pl(e){return!(e.length!==3||e[0]!==117&&e[0]!==85||e[1]!==114&&e[1]!==82||e[2]!==108&&e[2]!==76)}function Za(e,t){for(;;){const n=t.source.codePointAt(t.cursor);if(n===void 0)return;if(n===41)return void t.advanceCodePoint();Gn(t)?(t.advanceCodePoint(),sa(e,t)):t.advanceCodePoint()}}function Dl(e,t){for(;xn(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();let n="";for(;;){if(t.source.codePointAt(t.cursor)===void 0){const s=[v.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}];return e.onParseError(new un(Kt.UnexpectedEOFInURL,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","Unexpected EOF"],s)),s}if(t.source.codePointAt(t.cursor)===41)return t.advanceCodePoint(),[v.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}];if(xn(t.source.codePointAt(t.cursor)??-1)){for(t.advanceCodePoint();xn(t.source.codePointAt(t.cursor)??-1);)t.advanceCodePoint();if(t.source.codePointAt(t.cursor)===void 0){const s=[v.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}];return e.onParseError(new un(Kt.UnexpectedEOFInURL,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","Consume as much whitespace as possible","Unexpected EOF"],s)),s}return t.source.codePointAt(t.cursor)===41?(t.advanceCodePoint(),[v.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:n}]):(Za(e,t),[v.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0])}const a=t.source.codePointAt(t.cursor);if(a===34||a===39||a===40||(r=a??-1)===11||r===127||0<=r&&r<=8||14<=r&&r<=31){Za(e,t);const s=[v.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new un(Kt.UnexpectedCharacterInURL,t.representationStart,t.representationEnd,["4.3.6. Consume a url token",`Unexpected U+0022 QUOTATION MARK ("), U+0027 APOSTROPHE ('), U+0028 LEFT PARENTHESIS (() or non-printable code point`],s)),s}if(a===92){if(Gn(t)){t.advanceCodePoint(),n+=String.fromCodePoint(sa(e,t));continue}Za(e,t);const s=[v.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new un(Kt.InvalidEscapeSequenceInURL,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","U+005C REVERSE SOLIDUS (\\)","The input stream does not start with a valid escape sequence"],s)),s}t.source.codePointAt(t.cursor)===0||zn(t.source.codePointAt(t.cursor)??-1)?(n+=String.fromCodePoint(hn),t.advanceCodePoint()):(n+=t.source[t.cursor],t.advanceCodePoint())}var r}function Ja(e,t){const n=oa(e,t);if(t.source.codePointAt(t.cursor)!==40)return[v.Ident,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...n)}];if(Pl(n)){t.advanceCodePoint();let r=0;for(;;){const a=xn(t.source.codePointAt(t.cursor)??-1),s=xn(t.source.codePointAt(t.cursor+1)??-1);if(a&&s){r+=1,t.advanceCodePoint(1);continue}const o=a?t.source.codePointAt(t.cursor+1):t.source.codePointAt(t.cursor);if(o===34||o===39)return r>0&&t.unreadCodePoint(r),[v.Function,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...n)}];break}return Dl(e,t)}return t.advanceCodePoint(),[v.Function,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...n)}]}function Bl(e){return!(e.source.codePointAt(e.cursor)!==117&&e.source.codePointAt(e.cursor)!==85||e.source.codePointAt(e.cursor+1)!==Tn||e.source.codePointAt(e.cursor+2)!==63&&!Hn(e.source.codePointAt(e.cursor+2)??-1))}function Rl(e,t){t.advanceCodePoint(2);const n=[],r=[];let a;for(;(a=t.source.codePointAt(t.cursor))!==void 0&&n.length<6&&Hn(a);)n.push(a),t.advanceCodePoint();for(;(a=t.source.codePointAt(t.cursor))!==void 0&&n.length<6&&a===63;)r.length===0&&r.push(...n),n.push(48),r.push(70),t.advanceCodePoint();if(!r.length&&t.source.codePointAt(t.cursor)===Me&&Hn(t.source.codePointAt(t.cursor+1)??-1))for(t.advanceCodePoint();(a=t.source.codePointAt(t.cursor))!==void 0&&r.length<6&&Hn(a);)r.push(a),t.advanceCodePoint();if(!r.length){const i=parseInt(String.fromCodePoint(...n),16);return[v.UnicodeRange,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{startOfRange:i,endOfRange:i}]}const s=parseInt(String.fromCodePoint(...n),16),o=parseInt(String.fromCodePoint(...r),16);return[v.UnicodeRange,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{startOfRange:s,endOfRange:o}]}function Zt(e,t){const n=lo(e),r=[];for(;!n.endOfFile();)r.push(n.nextToken());return r.push(n.nextToken()),r}function lo(e,t){const n=e.css.valueOf(),r=e.unicodeRangesAllowed??!1,a=new Ml(n),s={onParseError:Ol};return{nextToken:function(){a.resetRepresentation();const o=a.source.codePointAt(a.cursor);if(o===void 0)return[v.EOF,"",-1,-1,void 0];if(o===47&&yl(a))return xl(s,a);if(r&&(o===117||o===85)&&Bl(a))return Rl(0,a);if(Un(o))return Ja(s,a);if(ct(o))return Ya(s,a);switch(o){case 44:return a.advanceCodePoint(),[v.Comma,",",a.representationStart,a.representationEnd,void 0];case 58:return a.advanceCodePoint(),[v.Colon,":",a.representationStart,a.representationEnd,void 0];case 59:return a.advanceCodePoint(),[v.Semicolon,";",a.representationStart,a.representationEnd,void 0];case 40:return a.advanceCodePoint(),[v.OpenParen,"(",a.representationStart,a.representationEnd,void 0];case 41:return a.advanceCodePoint(),[v.CloseParen,")",a.representationStart,a.representationEnd,void 0];case 91:return a.advanceCodePoint(),[v.OpenSquare,"[",a.representationStart,a.representationEnd,void 0];case 93:return a.advanceCodePoint(),[v.CloseSquare,"]",a.representationStart,a.representationEnd,void 0];case 123:return a.advanceCodePoint(),[v.OpenCurly,"{",a.representationStart,a.representationEnd,void 0];case 125:return a.advanceCodePoint(),[v.CloseCurly,"}",a.representationStart,a.representationEnd,void 0];case 39:case 34:return Al(s,a);case 35:return Fl(s,a);case Tn:case 46:return io(a)?Ya(s,a):(a.advanceCodePoint(),[v.Delim,a.source[a.representationStart],a.representationStart,a.representationEnd,{value:a.source[a.representationStart]}]);case In:case _n:case 12:case 9:case 32:return Sl(a);case Me:return io(a)?Ya(s,a):Nl(a)?(a.advanceCodePoint(3),[v.CDC,"-->",a.representationStart,a.representationEnd,void 0]):ra(0,a)?Ja(s,a):(a.advanceCodePoint(),[v.Delim,"-",a.representationStart,a.representationEnd,{value:"-"}]);case 60:return gl(a)?(a.advanceCodePoint(4),[v.CDO,"<!--",a.representationStart,a.representationEnd,void 0]):(a.advanceCodePoint(),[v.Delim,"<",a.representationStart,a.representationEnd,{value:"<"}]);case 64:if(a.advanceCodePoint(),ra(0,a)){const i=oa(s,a);return[v.AtKeyword,a.source.slice(a.representationStart,a.representationEnd+1),a.representationStart,a.representationEnd,{value:String.fromCodePoint(...i)}]}return[v.Delim,"@",a.representationStart,a.representationEnd,{value:"@"}];case 92:{if(Gn(a))return Ja(s,a);a.advanceCodePoint();const i=[v.Delim,"\\",a.representationStart,a.representationEnd,{value:"\\"}];return s.onParseError(new un(Kt.InvalidEscapeSequenceAfterBackslash,a.representationStart,a.representationEnd,["4.3.1. Consume a token","U+005C REVERSE SOLIDUS (\\)","The input stream does not start with a valid escape sequence"],i)),i}}return a.advanceCodePoint(),[v.Delim,a.source[a.representationStart],a.representationStart,a.representationEnd,{value:a.source[a.representationStart]}]},endOfFile:function(){return a.source.codePointAt(a.cursor)===void 0}}}function Ol(){}function co(e,t){const n=[];for(const i of t)n.push(i.codePointAt(0));const r=Wl(n);r[0]===101&&Qa(r,0,r[0]);const a=String.fromCodePoint(...r),s=e[4].signCharacter==="+"?e[4].signCharacter:"",o=e[4].value.toString();e[1]=`${s}${o}${a}`,e[4].unit=t}function Wl(e){let t=0;if(e[0]===0)e.splice(0,1,hn),t=1;else if(e[0]===Me&&e[1]===Me)t=2;else if(e[0]===Me&&e[1])t=2,Un(e[1])||(t+=Qa(e,1,e[1]));else{if(e[0]===Me&&!e[1])return[92,e[0]];Un(e[0])?t=1:(t=1,t+=Qa(e,0,e[0]))}for(let n=t;n<e.length;n++)e[n]!==0?Ka(e[n])||(n+=Ll(e,n,e[n])):(e.splice(n,1,hn),n++);return e}function Ll(e,t,n){return e.splice(t,1,92,n),1}function Qa(e,t,n){const r=n.toString(16),a=[];for(const s of r)a.push(s.codePointAt(0));return e.splice(t,1,92,...a,32),1+a.length}const _l=Object.values(v);function es(e){return!!Array.isArray(e)&&!(e.length<4)&&!!_l.includes(e[0])&&typeof e[1]=="string"&&typeof e[2]=="number"&&typeof e[3]=="number"}function fe(e){if(!e)return!1;switch(e[0]){case v.Dimension:case v.Number:case v.Percentage:return!0;default:return!1}}function uo(e){if(!e)return!1;switch(e[0]){case v.Whitespace:case v.Comment:return!0;default:return!1}}function Nt(e){return!!e&&e[0]===v.Comma}function ho(e){return!!e&&e[0]===v.Comment}function Nr(e){return!!e&&e[0]===v.Delim}function se(e){return!!e&&e[0]===v.Dimension}function Dt(e){return!!e&&e[0]===v.EOF}function Il(e){return!!e&&e[0]===v.Function}function Tl(e){return!!e&&e[0]===v.Hash}function ue(e){return!!e&&e[0]===v.Ident}function H(e){return!!e&&e[0]===v.Number}function ne(e){return!!e&&e[0]===v.Percentage}function ts(e){return!!e&&e[0]===v.Whitespace}function fo(e){return!!e&&e[0]===v.OpenParen}function Hl(e){return!!e&&e[0]===v.CloseParen}function Ul(e){return!!e&&e[0]===v.OpenSquare}function zl(e){return!!e&&e[0]===v.OpenCurly}var ut;function po(e){let t=e.slice();return(n,r,a)=>{let s=-1;for(let o=t.indexOf(r);o<t.length&&(s=n.indexOf(t[o]),s===-1||s<a);o++);return s===-1||s===a&&r===n[a]&&(s++,s>=n.length)?-1:(t=n.slice(),s)}}function ia(e,t){const n=t[0];if(fo(n)||zl(n)||Ul(n)){const r=jl(e,t);return{advance:r.advance,node:r.node}}if(Il(n)){const r=Gl(e,t);return{advance:r.advance,node:r.node}}if(ts(n)){const r=go(e,t);return{advance:r.advance,node:r.node}}if(ho(n)){const r=ql(e,t);return{advance:r.advance,node:r.node}}return{advance:1,node:new G(n)}}(function(e){e.Function="function",e.SimpleBlock="simple-block",e.Whitespace="whitespace",e.Comment="comment",e.Token="token"})(ut||(ut={}));class mo{constructor(){X(this,"value",[])}indexOf(t){return this.value.indexOf(t)}at(t){if(typeof t=="number")return t<0&&(t=this.value.length+t),this.value[t]}forEach(t,n){if(this.value.length===0)return;const r=po(this.value);let a=0;for(;a<this.value.length;){const s=this.value[a];let o;if(n&&(o={...n}),t({node:s,parent:this,state:o},a)===!1)return!1;if(a=r(this.value,s,a),a===-1)break}}walk(t,n){this.value.length!==0&&this.forEach(((r,a)=>t(r,a)!==!1&&(!("walk"in r.node)||!this.value.includes(r.node)||r.node.walk(t,r.state)!==!1)&&void 0),n)}}class qe extends mo{constructor(t,n,r){super(),X(this,"type",ut.Function),X(this,"name"),X(this,"endToken"),this.name=t,this.endToken=n,this.value=r}getName(){return this.name[4].value}normalize(){Dt(this.endToken)&&(this.endToken=[v.CloseParen,")",-1,-1,void 0])}tokens(){return Dt(this.endToken)?[this.name,...this.value.flatMap((t=>t.tokens()))]:[this.name,...this.value.flatMap((t=>t.tokens())),this.endToken]}toString(){const t=this.value.map((n=>es(n)?Yt(n):n.toString())).join("");return Yt(this.name)+t+Yt(this.endToken)}toJSON(){return{type:this.type,name:this.getName(),tokens:this.tokens(),value:this.value.map((t=>t.toJSON()))}}isFunctionNode(){return qe.isFunctionNode(this)}static isFunctionNode(t){return!!t&&t instanceof qe&&t.type===ut.Function}}function Gl(e,t){const n=[];let r=1;for(;;){const a=t[r];if(!a||Dt(a))return e.onParseError(new yr("Unexpected EOF while consuming a function.",t[0][2],t[t.length-1][3],["5.4.9. Consume a function","Unexpected EOF"])),{advance:t.length,node:new qe(t[0],a,n)};if(Hl(a))return{advance:r+1,node:new qe(t[0],a,n)};if(uo(a)){const o=vo(e,t.slice(r));r+=o.advance,n.push(...o.nodes);continue}const s=ia(e,t.slice(r));r+=s.advance,n.push(s.node)}}class wr extends mo{constructor(t,n,r){super(),X(this,"type",ut.SimpleBlock),X(this,"startToken"),X(this,"endToken"),this.startToken=t,this.endToken=n,this.value=r}normalize(){if(Dt(this.endToken)){const t=Cl(this.startToken);t&&(this.endToken=t)}}tokens(){return Dt(this.endToken)?[this.startToken,...this.value.flatMap((t=>t.tokens()))]:[this.startToken,...this.value.flatMap((t=>t.tokens())),this.endToken]}toString(){const t=this.value.map((n=>es(n)?Yt(n):n.toString())).join("");return Yt(this.startToken)+t+Yt(this.endToken)}toJSON(){return{type:this.type,startToken:this.startToken,tokens:this.tokens(),value:this.value.map((t=>t.toJSON()))}}isSimpleBlockNode(){return wr.isSimpleBlockNode(this)}static isSimpleBlockNode(t){return!!t&&t instanceof wr&&t.type===ut.SimpleBlock}}function jl(e,t){const n=El(t[0][0]);if(!n)throw new Error("Failed to parse, a mirror variant must exist for all block open tokens.");const r=[];let a=1;for(;;){const s=t[a];if(!s||Dt(s))return e.onParseError(new yr("Unexpected EOF while consuming a simple block.",t[0][2],t[t.length-1][3],["5.4.8. Consume a simple block","Unexpected EOF"])),{advance:t.length,node:new wr(t[0],s,r)};if(s[0]===n)return{advance:a+1,node:new wr(t[0],s,r)};if(uo(s)){const i=vo(e,t.slice(a));a+=i.advance,r.push(...i.nodes);continue}const o=ia(e,t.slice(a));a+=o.advance,r.push(o.node)}}class lt{constructor(t){X(this,"type",ut.Whitespace),X(this,"value"),this.value=t}tokens(){return this.value}toString(){return Yt(...this.value)}toJSON(){return{type:this.type,tokens:this.tokens()}}isWhitespaceNode(){return lt.isWhitespaceNode(this)}static isWhitespaceNode(t){return!!t&&t instanceof lt&&t.type===ut.Whitespace}}function go(e,t){let n=0;for(;;){const r=t[n];if(!ts(r))return{advance:n,node:new lt(t.slice(0,n))};n++}}class $r{constructor(t){X(this,"type",ut.Comment),X(this,"value"),this.value=t}tokens(){return[this.value]}toString(){return Yt(this.value)}toJSON(){return{type:this.type,tokens:this.tokens()}}isCommentNode(){return $r.isCommentNode(this)}static isCommentNode(t){return!!t&&t instanceof $r&&t.type===ut.Comment}}function ql(e,t){return{advance:1,node:new $r(t[0])}}function vo(e,t){const n=[];let r=0;for(;;)if(ts(t[r])){const a=go(0,t.slice(r));r+=a.advance,n.push(a.node)}else{if(!ho(t[r]))return{advance:r,nodes:n};n.push(new $r(t[r])),r++}}class G{constructor(t){X(this,"type",ut.Token),X(this,"value"),this.value=t}tokens(){return[this.value]}toString(){return this.value[1]}toJSON(){return{type:this.type,tokens:this.tokens()}}isTokenNode(){return G.isTokenNode(this)}static isTokenNode(t){return!!t&&t instanceof G&&t.type===ut.Token}}function Vl(e,t){const n={onParseError:(()=>{})},r=[...e];Dt(r[r.length-1])&&r.push([v.EOF,"",r[r.length-1][2],r[r.length-1][3],void 0]);const a=ia(n,r);if(Dt(r[Math.min(a.advance,r.length-1)]))return a.node;n.onParseError(new yr("Expected EOF after parsing a component value.",e[0][2],e[e.length-1][3],["5.3.9. Parse a component value","Expected EOF"]))}function Xl(e,t){const n={onParseError:t?.onParseError??(()=>{})},r=[...e];if(e.length===0)return[];Dt(r[r.length-1])&&r.push([v.EOF,"",r[r.length-1][2],r[r.length-1][3],void 0]);const a=[];let s=[],o=0;for(;;){if(!r[o]||Dt(r[o]))return s.length&&a.push(s),a;if(Nt(r[o])){a.push(s),s=[],o++;continue}const i=ia(n,e.slice(o));s.push(i.node),o+=i.advance}}function Kl(e,t,n){if(e.length===0)return;const r=po(e);let a=0;for(;a<e.length;){const s=e[a];if(t({node:s,parent:{value:e},state:void 0},a)===!1)return!1;if(a=r(e,s,a),a===-1)break}}function Yl(e,t,n){e.length!==0&&Kl(e,((r,a)=>t(r,a)!==!1&&(!("walk"in r.node)||!e.includes(r.node)||r.node.walk(t,r.state)!==!1)&&void 0))}function bo(e,t){for(let n=0;n<e.length;n++)Yl(e[n],((r,a)=>{if(typeof a!="number")return;const s=t(r.node);s&&(Array.isArray(s)?r.parent.value.splice(a,1,...s):r.parent.value.splice(a,1,s))}));return e}function Zl(e){return wr.isSimpleBlockNode(e)}function Ve(e){return qe.isFunctionNode(e)}function rt(e){return lt.isWhitespaceNode(e)}function at(e){return $r.isCommentNode(e)}function Jt(e){return rt(e)||at(e)}function I(e){return G.isTokenNode(e)}const Jl=/[A-Z]/g;function Xe(e){return e.replace(Jl,(t=>String.fromCharCode(t.charCodeAt(0)+32)))}const Ql={cm:"px",in:"px",mm:"px",pc:"px",pt:"px",px:"px",q:"px",deg:"deg",grad:"deg",rad:"deg",turn:"deg",ms:"s",s:"s",hz:"hz",khz:"hz"},ec=new Map([["cm",e=>e],["mm",e=>10*e],["q",e=>40*e],["in",e=>e/2.54],["pc",e=>e/2.54*6],["pt",e=>e/2.54*72],["px",e=>e/2.54*96]]),la=new Map([["deg",e=>e],["grad",e=>e/.9],["rad",e=>e/180*Math.PI],["turn",e=>e/360]]),Er=new Map([["deg",e=>.9*e],["grad",e=>e],["rad",e=>.9*e/180*Math.PI],["turn",e=>.9*e/360]]),tc=new Map([["hz",e=>e],["khz",e=>e/1e3]]),nc=new Map([["cm",e=>2.54*e],["mm",e=>25.4*e],["q",e=>25.4*e*4],["in",e=>e],["pc",e=>6*e],["pt",e=>72*e],["px",e=>96*e]]),rc=new Map([["hz",e=>1e3*e],["khz",e=>e]]),ac=new Map([["cm",e=>e/10],["mm",e=>e],["q",e=>4*e],["in",e=>e/25.4],["pc",e=>e/25.4*6],["pt",e=>e/25.4*72],["px",e=>e/25.4*96]]),sc=new Map([["ms",e=>e],["s",e=>e/1e3]]),oc=new Map([["cm",e=>e/6*2.54],["mm",e=>e/6*25.4],["q",e=>e/6*25.4*4],["in",e=>e/6],["pc",e=>e],["pt",e=>e/6*72],["px",e=>e/6*96]]),ic=new Map([["cm",e=>e/72*2.54],["mm",e=>e/72*25.4],["q",e=>e/72*25.4*4],["in",e=>e/72],["pc",e=>e/72*6],["pt",e=>e],["px",e=>e/72*96]]),lc=new Map([["cm",e=>e/96*2.54],["mm",e=>e/96*25.4],["q",e=>e/96*25.4*4],["in",e=>e/96],["pc",e=>e/96*6],["pt",e=>e/96*72],["px",e=>e]]),cc=new Map([["cm",e=>e/4/10],["mm",e=>e/4],["q",e=>e],["in",e=>e/4/25.4],["pc",e=>e/4/25.4*6],["pt",e=>e/4/25.4*72],["px",e=>e/4/25.4*96]]),wo=new Map([["deg",e=>180*e/Math.PI],["grad",e=>180*e/Math.PI/.9],["rad",e=>e],["turn",e=>180*e/Math.PI/360]]),uc=new Map([["ms",e=>1e3*e],["s",e=>e]]),Cr=new Map([["deg",e=>360*e],["grad",e=>360*e/.9],["rad",e=>360*e/180*Math.PI],["turn",e=>e]]),$o=new Map([["cm",ec],["mm",ac],["q",cc],["in",nc],["pc",oc],["pt",ic],["px",lc],["ms",sc],["s",uc],["deg",la],["grad",Er],["rad",wo],["turn",Cr],["hz",tc],["khz",rc]]);function st(e,t){if(!se(e)||!se(t))return t;const n=Xe(e[4].unit),r=Xe(t[4].unit);if(n===r)return t;const a=$o.get(r);if(!a)return t;const s=a.get(n);if(!s)return t;const o=s(t[4].value),i=[v.Dimension,"",t[2],t[3],{...t[4],signCharacter:o<0?"-":void 0,type:Number.isInteger(o)?S.Integer:S.Number,value:o}];return co(i,e[4].unit),i}function hc(e){if(!se(e))return e;const t=Xe(e[4].unit),n=Ql[t];if(t===n)return e;const r=$o.get(t);if(!r)return e;const a=r.get(n);if(!a)return e;const s=a(e[4].value),o=[v.Dimension,"",e[2],e[3],{...e[4],signCharacter:s<0?"-":void 0,type:Number.isInteger(s)?S.Integer:S.Number,value:s}];return co(o,n),o}function fc(e){if(e.length!==2)return-1;const t=e[0].value;let n=e[1].value;if(H(t)&&H(n)){const r=t[4].value+n[4].value;return new G([v.Number,r.toString(),t[2],n[3],{value:r,type:t[4].type===S.Integer&&n[4].type===S.Integer?S.Integer:S.Number}])}if(ne(t)&&ne(n)){const r=t[4].value+n[4].value;return new G([v.Percentage,r.toString()+"%",t[2],n[3],{value:r}])}if(se(t)&&se(n)&&(n=st(t,n),Xe(t[4].unit)===Xe(n[4].unit))){const r=t[4].value+n[4].value;return new G([v.Dimension,r.toString()+t[4].unit,t[2],n[3],{value:r,type:t[4].type===S.Integer&&n[4].type===S.Integer?S.Integer:S.Number,unit:t[4].unit}])}return-1}function pc(e){if(e.length!==2)return-1;const t=e[0].value,n=e[1].value;if(H(t)&&H(n)){const r=t[4].value/n[4].value;return new G([v.Number,r.toString(),t[2],n[3],{value:r,type:Number.isInteger(r)?S.Integer:S.Number}])}if(ne(t)&&H(n)){const r=t[4].value/n[4].value;return new G([v.Percentage,r.toString()+"%",t[2],n[3],{value:r}])}if(se(t)&&H(n)){const r=t[4].value/n[4].value;return new G([v.Dimension,r.toString()+t[4].unit,t[2],n[3],{value:r,type:Number.isInteger(r)?S.Integer:S.Number,unit:t[4].unit}])}return-1}function Fn(e){return!!e&&typeof e=="object"&&"inputs"in e&&Array.isArray(e.inputs)&&"operation"in e}function Ke(e){if(e===-1)return-1;const t=[];for(let n=0;n<e.inputs.length;n++){const r=e.inputs[n];if(I(r)){t.push(r);continue}const a=Ke(r);if(a===-1)return-1;t.push(a)}return e.operation(t)}function dc(e){if(e.length!==2)return-1;const t=e[0].value,n=e[1].value;if(H(t)&&H(n)){const r=t[4].value*n[4].value;return new G([v.Number,r.toString(),t[2],n[3],{value:r,type:t[4].type===S.Integer&&n[4].type===S.Integer?S.Integer:S.Number}])}if(ne(t)&&H(n)){const r=t[4].value*n[4].value;return new G([v.Percentage,r.toString()+"%",t[2],n[3],{value:r}])}if(H(t)&&ne(n)){const r=t[4].value*n[4].value;return new G([v.Percentage,r.toString()+"%",t[2],n[3],{value:r}])}if(se(t)&&H(n)){const r=t[4].value*n[4].value;return new G([v.Dimension,r.toString()+t[4].unit,t[2],n[3],{value:r,type:t[4].type===S.Integer&&n[4].type===S.Integer?S.Integer:S.Number,unit:t[4].unit}])}if(H(t)&&se(n)){const r=t[4].value*n[4].value;return new G([v.Dimension,r.toString()+n[4].unit,t[2],n[3],{value:r,type:t[4].type===S.Integer&&n[4].type===S.Integer?S.Integer:S.Number,unit:n[4].unit}])}return-1}function jn(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(!I(r))continue;const a=r.value;if(!ue(a))continue;const s=Xe(a[4].value);switch(s){case"e":e.splice(n,1,new G([v.Number,Math.E.toString(),a[2],a[3],{value:Math.E,type:S.Number}]));break;case"pi":e.splice(n,1,new G([v.Number,Math.PI.toString(),a[2],a[3],{value:Math.PI,type:S.Number}]));break;case"infinity":e.splice(n,1,new G([v.Number,"infinity",a[2],a[3],{value:1/0,type:S.Number}]));break;case"-infinity":e.splice(n,1,new G([v.Number,"-infinity",a[2],a[3],{value:-1/0,type:S.Number}]));break;case"nan":e.splice(n,1,new G([v.Number,"NaN